# üß© Polycrate ‚Äì 3D Asset Sharing Community Platform

Polycrate is a scalable, microservice-based backend system built in Go, designed to manage, convert, and deliver 3D assets for web-based visualization platforms. It tightly integrates with a React.js frontend using Three.js and GLTFLoader for interactive, compressed 3D previews.

---

## üß± Features

- üë§ **User authentication and account management**
- üìÅ **Upload 3D assets:** `.obj`, `.gltf`, `.glb`, or `.flx`
- üîÑ **Automatic format conversion and preview generation**
- üìâ **GLB preview optimization and GZIP compression** for fast delivery
- ‚òÅÔ∏è **S3-compatible object storage**
- üîç **Search** (planned: Elasticsearch)
- üì® **Notification queue** (planned: NATS or RabbitMQ)
- üí¨ **gRPC microservices** with protobuf interfaces
- üê≥ **Docker-based development infrastructure**
- üß™ **Full test coverage** with reporting

---

## üß∞ Tech Stack

| Layer            | Technology                                      |
|------------------|-------------------------------------------------|
| Backend Services | Go (gRPC, PostgreSQL, Redis)                    |
| Asset Worker     | Go / Node.js / Python (convert & compress)      |
| Frontend         | React.js + Three.js (`@react-three/fiber`)      |
| Database         | PostgreSQL                                      |
| Object Storage   | S3 (AWS or MinIO)                               |
| Queue            | Redis / NATS / RabbitMQ                         |
| Infrastructure   | Docker, Docker Compose                          |
| File Conversion  | Blender CLI, gltf-pipeline, gzip                |
| Testing          | `go test`, Testify                              |

---
## üöÄ Getting Started

### 1Ô∏è‚É£ Start Local Dev Infrastructure

This launches Postgres, Redis (optional), and mounts `schema.sql` into the container.

task dev_infra

text

> **Note:**  
> Make sure `schema.sql` exists under `infra/dev/schema.sql` if you're using Docker volume mounting.

---

### 2Ô∏è‚É£ Run the User Service

task run:user_service


Or directly:
```bash
go run ./cmd/user_service/main.go
```


---

### 3Ô∏è‚É£ Generate Protobuf Code

This will generate Go code from your `.proto` files for gRPC services:

task gen:protobuf


Make sure you have the necessary tools installed:

```bash

go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest
```
---

### 4Ô∏è‚É£ Run Tests and Generate Coverage

task test

text

This generates:
- `coverage.out` ‚Äî raw test coverage file
- `coverage.html` ‚Äî annotated HTML coverage report

## üîó Useful Commands

- **Start All Services**:  
  `docker-compose up -d`

- **Clean Containers/Volumes**:  
  `docker-compose down -v`

---